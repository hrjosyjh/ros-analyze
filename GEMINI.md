# Project Context: ROS2 AGV Log Analyzer

## Overview
This project contains a set of Python tools designed to analyze large-scale `launch.log` files (14GB+) generated by ROS2 AGV (syswin_abot) systems. The tools support incremental analysis, real-time monitoring, and detailed node-level inspection without requiring external dependencies.

## Key Files

### Source Code
- **`analyze_log.py`**: The primary script for time-based log analysis. It handles incremental processing (using checkpoints), real-time monitoring (`tail -f` style), and generates summary reports.
- **`analyze_node.py`**: A specialized script for node-centric analysis. It focuses on individual node statistics, error rates, and timelines, allowing for deep dives into specific system components.

### Data & Output
- **`launch.log`**: The target input file (ROS2 logs). Supports standard ROS2 launch format, ROS2 logging format, and direct node output with ANSI color codes.
- **`reports/`**: Directory where generated CSV reports and the incremental analysis checkpoint (`.checkpoint.json`) are stored.

## Usage Guide

### 1. General Log Analysis (`analyze_log.py`)
Standard usage for analyzing the log file based on time intervals.

```bash
# Incremental analysis (default)
python3 analyze_log.py launch.log

# Full re-analysis (ignores checkpoints)
python3 analyze_log.py launch.log --full

# Real-time monitoring
python3 analyze_log.py launch.log -f --refresh 1
```

### 2. Node-Specific Analysis (`analyze_node.py`)
Usage for inspecting specific nodes or comparing multiple nodes.

```bash
# Summary of all nodes
python3 analyze_node.py launch.log

# Detailed analysis of a specific node (partial match supported)
python3 analyze_node.py launch.log --node motor_driver

# Compare multiple nodes
python3 analyze_node.py launch.log -n motor -n tsd
```

## Log Formats
The tools are capable of parsing three main log patterns:
1. **Standard Launch:** `Timestamp [LEVEL] [node-name]: message`
2. **ROS2 Logging:** `Timestamp [node-name] [LEVEL] ...`
3. **Direct Output:** `Timestamp [node-name] ...` (ANSI colors used to infer level)

## Development Notes
- **Dependencies:** Standard Python 3.8+ libraries only.
- **Performance:** Optimized for large files using streaming processing.
- **Output:** CSV files are saved with `utf-8-sig` encoding for Excel compatibility.
